import{r,j as t}from"./index-B4a_Qms2.js";import{g}from"./catApi-Bkpp4f2E.js";import{p as f}from"./parsers-Cp_Y0xt0.js";import{I as u}from"./ImageGallery-AdIls6FK.js";const h=()=>{const[s,o]=r.useState(()=>{const n=localStorage.getItem("fetchedImages");return n?f(JSON.parse(n)):[]}),[e,a]=r.useState(!1),[l,c]=r.useState(null),m=r.useCallback(async(n=!0)=>{if(!e){a(!0),c(null);try{const i=await g(10);o(d=>n?i:[...d,...i])}catch(i){console.error(i),c("Failed to fetch images")}finally{a(!1)}}},[e]);return r.useEffect(()=>{localStorage.setItem("fetchedImages",JSON.stringify(s))},[s]),{images:s,fetchImages:m,isLoading:e,error:l}};function S(){const{images:s,fetchImages:o,isLoading:e,error:a}=h();return r.useEffect(()=>{e||o()},[]),t.jsxs("div",{children:[t.jsx("h1",{children:"Random Cats"}),s.length&&t.jsxs("div",{children:[t.jsx(u,{images:s}),t.jsx("button",{type:"button",onClick:()=>{o(!1)},disabled:e,children:"Load More"})]}),e&&t.jsx("p",{children:"Loading..."}),a&&t.jsx("p",{className:"text-red-500",children:a})]})}export{S as default};
